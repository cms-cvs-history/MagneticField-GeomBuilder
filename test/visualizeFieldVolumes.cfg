# This cfg file can be used to visualize the simulation geometry
# and the magnetic field.
# Use it with 
# iguana -p visualizeFieldVolumes.cfg -is "CMSSW"

process IGUANA = {
    
    ########################################
    # This is a service to configure IGUANA
    #
    service = VisConfigurationService 
    {
	##########
	# Number of various windows to be popped up and tiled. 
	# Default value is 'RPhi Window'
	#
	# untracked vstring Views = {'3D Window', 'Lego Window', 'RPhi Window', 'RZ Window'}
	untracked vstring Views = {'3D Window'}
	
	# #########
	# Services (this is a default value):
	# untracked vstring Services = {'Services/Framework/GUI/'}
	
	# #########
	# Whether or not load the Text browser (this is a default value):
	# untracked bool TextBrowser = true
	
	# #########
	# Whether or not load the Twig browser (this is a default value):
	# untracked bool TwigBrowser = true
	
	# #########
	# Which context data proxies to load (the default value is defined
	# in VisApplicationMain and usually loads all available data proxies)
	
	# for field: 'Simulation/MagField' or 'Reco/CMS Magnetic Field'.
	# As of 130, The former does not work when a non-standard geant
	# geometry is visualized
	untracked vstring  ContentProxies = {'Simulation/Core', 'Simulation/Geometry', 'Reco/CMS Magnetic Field'}
    }
	
    source = EmptySource {}

    untracked PSet maxEvents = {untracked int32 input = 1}

    # Default geometry
    #   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
    
    # display field geometry
    es_source = XMLIdealGeometryESSource 
    {
	vstring geomXMLFiles = {
	    "Geometry/CMSCommonData/data/materials.xml",
	    "Geometry/CMSCommonData/data/rotations.xml",
            "Geometry/CMSCommonData/data/normal/cmsextent.xml",
	    "Geometry/CMSCommonData/data/cms.xml",
	    "Geometry/CMSCommonData/data/cmsMagneticField.xml",	    
	    "MagneticField/GeomBuilder/data/MagneticFieldVolumes_85l.xml"
	}
	string rootNodeName="cms:MCMS"
    }
    
    
    #Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"    
    
    module geom = GeometryProducer 
    { 
	bool UseMagneticField = false
	bool UseSensitiveDetectors = false
	PSet MagneticField = { double delta = 1. }
    }
    path p1 = { geom }
}
